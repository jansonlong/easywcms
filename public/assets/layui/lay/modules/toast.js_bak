layui.define(function(a){"use strict";var b=function(a){var b=Object.create(d);return b.init(a,this),{reset:function(a){b.reset(a)},update:function(a){b.update(a)}}},c={text:"",heading:"Success",showHideTransition:"fade",allowToastClose:!0,hideAfter:50000,loader:!1,loaderBg:"#9EC600",stack:5,position:"top-center",bgColor:!1,textColor:!1,textAlign:"left",icon:"success",beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}},d={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(a){this.prepareOptions(a,c),this.process()},prepareOptions:function(a,b){var c={};"string"==typeof a||a instanceof Array?c.text=a:c=a,this.options=$.extend({},b,c)},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate()},setup:function(){var b,a="";if(this._toastEl=this._toastEl||$("<div></div>",{"class":"easy-toast-single"}),a+='<span class="easy-toast-loader"></span>',this.options.allowToastClose&&(a+='<span class="easy-toast-close-single">&times;</span>'),this.options.text instanceof Array){for(this.options.heading&&(a+='<h2 class="easy-toast-heading">'+this.options.heading+"</h2>"),a+='<ul class="easy-toast-ul">',b=0;b<this.options.text.length;b++)a+='<li class="easy-toast-li" id="easy-toast-item-'+b+'">'+this.options.text[b]+"</li>";a+="</ul>"}else this.options.heading&&(a+='<span class="easy-toast-iconfont iconfont icon-'+this.options.icon+'"></span><h2 class="easy-toast-heading">'+this.options.heading+"</h2>"),a+=this.options.text;this._toastEl.html(a),this.options.bgColor!==!1&&this._toastEl.css("background-color",this.options.bgColor),this.options.textColor!==!1&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),this.options.icon!==!1&&(this._toastEl.addClass("easy-has-icon"),-1!==$.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("easy-icon-"+this.options.icon))},position:function(){"string"==typeof this.options.position&&-1!==$.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:$(window).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:$(window).outerWidth()/2-this._container.outerWidth()/2,top:55}):"mid-center"===this.options.position?this._container.css({left:$(window).outerWidth()/2-this._container.outerWidth()/2,top:$(window).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"==typeof this.options.position?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left")},bindToast:function(){var a=this;this._toastEl.on("afterShown",function(){a.processLoader()}),this._toastEl.find(".easy-toast-close-single").on("click",function(b){b.preventDefault(),"fade"===a.options.showHideTransition?(a._toastEl.trigger("beforeHide"),a._toastEl.fadeOut(function(){a._toastEl.trigger("afterHidden")})):"slide"===a.options.showHideTransition?(a._toastEl.trigger("beforeHide"),a._toastEl.slideUp(function(){a._toastEl.trigger("afterHidden")})):(a._toastEl.trigger("beforeHide"),a._toastEl.hide(function(){a._toastEl.trigger("afterHidden")}))}),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",function(){a.options.beforeShow()}),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",function(){a.options.afterShown()}),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",function(){a.options.beforeHide()}),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",function(){a.options.afterHidden()})},addToDom:function(){var b,c,a=$(".easy-toast-wrap");0===a.length?(a=$("<div></div>",{"class":"easy-toast-wrap"}),$("body").append(a)):(!this.options.stack||isNaN(parseInt(this.options.stack,10)))&&a.empty(),a.find(".easy-toast-single:hidden").remove(),a.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)&&(b=a.find(".easy-toast-single").length,c=b-this.options.stack,c>0&&$(".easy-toast-wrap").find(".easy-toast-single").slice(0,c).remove()),this._container=a},canAutoHide:function(){return this.options.hideAfter!==!1&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){var a,b,c,d;return this.canAutoHide()&&this.options.loader!==!1?(a=this._toastEl.find(".easy-toast-loader"),b=(this.options.hideAfter-400)/1e3+"s",c=this.options.loaderBg,d=a.attr("style")||"",d=d.substring(0,d.indexOf("-webkit-transition")),d+="-webkit-transition: width "+b+" ease-in;-o-transition: width "+b+" ease-in;transition: width "+b+" ease-in; background-color: "+c+";",a.attr("style",d).addClass("easy-toast-loaded"),void 0):!1},animate:function(){var a=this;this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn(function(){a._toastEl.trigger("afterShown")}):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown(function(){a._toastEl.trigger("afterShown")}):this._toastEl.show(function(){a._toastEl.trigger("afterShown")}),this.canAutoHide()&&(a=this,window.setTimeout(function(){"fade"===a.options.showHideTransition.toLowerCase()?(a._toastEl.trigger("beforeHide"),a._toastEl.fadeOut(function(){a._toastEl.trigger("afterHidden")})):"slide"===a.options.showHideTransition.toLowerCase()?(a._toastEl.trigger("beforeHide"),a._toastEl.slideUp(function(){a._toastEl.trigger("afterHidden")})):(a._toastEl.trigger("beforeHide"),a._toastEl.hide(function(){a._toastEl.trigger("afterHidden")}))},this.options.hideAfter))},reset:function(a){"all"===a?$(".easy-toast-wrap").remove():this._toastEl.remove()},update:function(a){this.prepareOptions(a,this.options),this.setup(),this.bindToast()}};a("toast",b)});