layui.define([],function(v){var d=layui.jquery,m=layui.element,f=layui.console_config,r=layui.device(),p=d(window),q=d("body"),e=d("#EASY_app"),b={escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(a,c){return layui.onevent.call(this,"admin",a,c)},screen:function(){var a=p.width();return 1200<a?3:992<a?2:768<a?1:0},sideFlexible:function(a){var c=d("#EASY_app_flexible"),k=b.screen();"spread"===a?(c.removeClass("layui-icon-spread-left").addClass("layui-icon-shrink-right"),2>k?e.addClass("easywcms-side-spread-sm"):e.removeClass("easywcms-side-spread-sm"),e.removeClass("easywcms-side-shrink")):(c.removeClass("layui-icon-shrink-right").addClass("layui-icon-spread-left"),2>k?e.removeClass("easywcms-side-shrink"):e.addClass("easywcms-side-shrink"),e.removeClass("easywcms-side-spread-sm"));layui.event.call(this,"admin","side({*})",{status:a})},tabsPage:{},tabsBody:function(a){return d("#EASY_app_body").find(".easywcms-tabsbody-item").eq(a||0)},tabsBodyChange:function(a,c){c=c||{};b.tabsBody(a).addClass("layui-show").siblings().removeClass("layui-show");if(c.attr){var attr=c.attr.split("-");g.showSubMenu(false,false,attr[0],attr[1])}g.rollPage("auto",a);layui.event.call(this,"admin","tabsPage({*})",{url:c.url,text:c.text})},resize:function(a){var c=layui.router().path.join("-");b.resizeFn[c]&&(p.off("resize",b.resizeFn[c]),delete b.resizeFn[c]);"off"!==a&&(a(),b.resizeFn[c]=a,p.on("resize",b.resizeFn[c]))},resizeFn:{},runResize:function(){var a=layui.router().path.join("-");b.resizeFn[a]&&b.resizeFn[a]()},delResize:function(){this.resize("off")},closeThisTabs:function(){b.tabsPage.index&&d(l).eq(b.tabsPage.index).find(".layui-tab-close").trigger("click")},fullScreen:function(){var a=document.documentElement,c=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;"undefined"!=typeof c&&c&&c.call(a)},exitScreen:function(){document.documentElement;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},g=b.events={flexible:function(a){a=a.find("#EASY_app_flexible").hasClass("layui-icon-spread-left");b.sideFlexible(a?"spread":null)},refresh:function(){var a=d(".easywcms-tabsbody-item").length;b.tabsPage.index>=a&&(b.tabsPage.index=a-1);b.tabsBody(b.tabsPage.index).find(".easywcms-iframe")[0].contentWindow.location.reload(!0)},theme:function(a,that){var url=a.attr("easy-url");easy.iframe({title:"选择皮肤",url:url,width:"222px",height:"335px",offset:"tr",shade:0.1})},fullscreen:function(a){a=a.children("i");a.hasClass("screen-full")?(b.fullScreen(),a.addClass("screen-restore").removeClass("screen-full")):(b.exitScreen(),a.addClass("screen-full").removeClass("screen-restore"))},upcache:function(){easy.ajax(easy.url.base+"upcache")},back:function(){history.back()},rollPage:function(a,c){var b=d("#EASY_app_tabsheader"),e=b.children("li"),f=(b.prop("scrollWidth"),b.outerWidth()),h=parseFloat(b.css("left"));if("left"===a){if(h||!(0>=h)){var g=-h-f;e.each(function(a,c){a=d(c).position().left;if(a>=g){return b.css("left",-a),!1}})}}else{"auto"===a?!function(){var a,k=e.eq(c);if(k[0]){if(a=k.position().left,a<-h){return b.css("left",-a)}if(a+k.outerWidth()>=f-h){var g=a+k.outerWidth()-(f-h);e.each(function(a,c){a=d(c).position().left;if(0<a+h&&a-h>g){return b.css("left",-a),!1}})}}}():e.each(function(a,c){a=d(c);c=a.position().left;if(c+a.outerWidth()>=f-h){return b.css("left",-c),!1}})}},leftPage:function(){g.rollPage("left")},rightPage:function(){g.rollPage()},shade:function(){b.sideFlexible()},showSubMenu:function(that,a,pid,id){var pid=pid||that.attr("data-id");var Tpls=demo.innerHTML,data=submenu[pid],seedlist=document.getElementById("LAY-system-side-menu");seedlist.innerHTML="";if(data){layui.laytpl(Tpls).render(data,function(html){seedlist.innerHTML=html});if(id){that=d('.console-header-left li a[data-id="'+pid+'"]');d('#LAY-system-side-menu li[data-name="m_'+id+'"]').addClass("layui-this")}else{d("#LAY-system-side-menu li:first a").click()}that.parent().addClass("layui-this").siblings().prepend().removeClass("layui-this")}}};layui.data("easywcms");r.ie&&10>r.ie&&1;!0;m.on("tab(easywcms-layout-tabs)",function(a){b.tabsPage.index=a.index});m.on("nav(easywcms-system-side-menu)",function(a){a.siblings(".layui-nav-child")[0]&&e.hasClass("easywcms-side-shrink")&&(b.sideFlexible("spread"),layer.close(a.data("index")));b.tabsPage.type="nav"});m.on("nav(easywcms-pagetabs-nav)",function(a){a=a.parent();a.removeClass("layui-this");a.parent().removeClass("layui-show")});var u=function(a){var c=a.attr("lay-id"),attr=a.attr("lay-attr");a=a.index();b.tabsBodyChange(a,{url:c,attr:attr})},l="#EASY_app_tabsheader>li";q.on("click",l,function(){var a=d(this),c=a.index();b.tabsPage.type="tab";b.tabsPage.index=c;
u(a)});m.on("tabDelete(easywcms-layout-tabs)",function(a){var c=d(l+".layui-this");a.index&&b.tabsBody(a.index).remove();u(c);b.delResize()});q.on("click","*[easy-href]",function(){var a=d(this),id=a.attr("easy-id"),pid=a.attr("easy-pid"),c=a.attr("easy-href"),e=a.attr("easy-text"),type=a.attr("easy-type")||false;layui.router();b.tabsPage.elem=a;(parent===self?layui:top.layui).console.openTabsPage(c,e||a.text(),{id:id,pid:pid});if(type=="menu"){a.parent().addClass("layui-this").siblings().prepend().removeClass("layui-this")}});q.on("click","*[easywcms-event]",function(){var a=d(this),b=a.attr("easywcms-event");g[b]&&g[b].call(this,a)});q.on("mouseenter","*[lay-tips]",function(){var a=d(this);if(!a.parent().hasClass("layui-nav-item")||e.hasClass("easywcms-side-shrink")){var b=a.attr("lay-tips"),f=a.attr("lay-offset");b=layer.tips(b,this,{time:-1,success:function(a,b){f&&a.css("margin-left",f+"px")}});a.data("index",b)}}).on("mouseleave","*[lay-tips]",function(){layer.close(d(this).data("index"))});var t=layui.data.resizeSystem=function(){layer.closeAll("tips");t.lock||setTimeout(function(){b.sideFlexible(2>b.screen()?"":"spread");delete t.lock},100);t.lock=!0};p.on("resize",layui.data.resizeSystem);v("console_lib",b)});layui.define(["laytpl"],function(f){var h=layui.element,c=layui.console_lib,g=c.tabsPage,e=layui.$;2>c.screen()&&c.sideFlexible();f("console",{openTabsPage:function(href,b,data){var k,l=e("#EASY_app_tabsheader>li"),href=href.replace(/(^http(s*):)|(\?[\s\S]*$)/g,"");(l.each(function(b){e(this).attr("lay-id")===href&&(k=!0,g.index=b)}),b=b||"\u65b0\u6807\u7b7e\u9875",true)?k||(e("#EASY_app_body").append(['<div class="easywcms-tabsbody-item layui-show">','<iframe src="'+href+'" frameborder="0" class="easywcms-iframe" id="iframe_m_'+data.id+'" name="iframe_m_'+data.id+'"></iframe>',"</div>"].join("")),g.index=l.length,h.tabAdd("easywcms-layout-tabs",{title:"<span>"+b+"</span>",id:href,attr:data.pid+"-"+data.id})):c.tabsBody(c.tabsPage.index).find(".easywcms-iframe")[0].contentWindow.location.href=a;h.tabChange("easywcms-layout-tabs",href);c.tabsBodyChange(g.index,{url:href,text:b,})}});e(".console-header-left li a[data-id='1']").click()});